
# ğŸŒ‘ Cocos Creator è‡ªè£½è§’è‰²å½±å­ç³»çµ±æ•™å­¸

æœ¬æ•™å­¸å°‡å¸¶ä½ ä¸€æ­¥æ­¥ä½¿ç”¨ Cocos Creator å»ºç«‹ä¸€å¥—ã€Œå‹•æ…‹å½±å­ç³»çµ±ã€ï¼Œè®“è§’è‰²èƒ½å¤ åœ¨åœ°é¢æŠ•å½±ï¼Œä¸¦ä¸”åªæœ‰åœ¨è§’è‰²èˆ‡åœ°é¢é‡ç–Šæ™‚æ‰æœƒé¡¯ç¤ºå½±å­æ•ˆæœã€‚

---

## âœ… æ•™å­¸æ­¥é©Ÿ

### 1ï¸âƒ£ å»ºç«‹Render Texture + ShadowMaterial
- `ShadowRenderTexture`ï¼š æŠŠç›¸æ©Ÿ(ShadowCamera)çœ‹åˆ°çš„ç•«é¢å³æ™‚åœ°æ¸²æŸ“ï¼ˆç•«ï¼‰åˆ°ä¸€å¼µè²¼åœ–ä¸Š ã€‚
-  `ShadowMaterial`ï¼š Effect é¸builtin-spriteä¸¦å‹¾é¸ USE TEXTUREã€‚


![å‰µå»º RenderTexture](./Png/RenderTexture.png)

![ä¿®æ”¹ RenderTextureSize](./Png/RenderTextureSize.png)

![å‰µå»º ShadowMaterial](./Png/ShadowMaterial.png)

---

### 2ï¸âƒ£ å»ºç«‹å…©å° Camera

- `GameCamera`ï¼šä¸»æ”å½±æ©Ÿï¼Œç”¨ä¾†æ¸²æŸ“èƒŒæ™¯èˆ‡è§’è‰²ã€‚
- `ShadowCamera`ï¼šå°ˆé–€æ‹æ”å½±å­çš„æ”å½±æ©Ÿã€‚
  - `clearFlags` è¨­ç‚º `COLOR`
  - `clearColor` è¨­ç‚ºé€æ˜ï¼š`Color(0, 0, 0, 0)`
  - `targetTexture` è¨­ç‚º `RenderTexture`ï¼Œç”¨ä¾†è¼¸å‡ºå½±å­ç•«é¢

![å‰µå»º Camera](./Png/Camera.png)

![æ›´æ”¹ ShadowCamera å±¬æ€§](./Png/ShadowCamera.png)

![æ›´æ”¹ GameCamera å±¬æ€§](./Png/GameCamera.png)

---


### 3ï¸âƒ£ å‰µå»º Shadow Layer

åˆ° `Project â†’ Project Settings â†’ Layers`ï¼Œæ–°å¢ä¸€å€‹åœ–å±¤åç¨±ï¼Œä¾‹å¦‚ï¼š

![å‰µå»º ShadowLayer](./Png/ShadowLayer.png)
---

### 4ï¸âƒ£ é¡¯ç¤ºå½±å­ï¼šShadowSprite + ShadowMaterial

- æ–°å¢ä¸€å€‹ Spriteï¼ˆä¾‹å¦‚å«åš ShadowSpriteï¼‰
- å°‡å…¶åœ–å±¤è¨­ç‚º `UI_2D`
- å¥—ç”¨ä½ è‡ªè¨‚çš„ `ShadowMaterial` æè³ªï¼ˆå…§éƒ¨ shader æœƒåˆ¤æ–·æ˜¯å¦èˆ‡ icon åœ–äº¤é›†ï¼‰
- cameraæŠ•å½±å‡ºä¾†çš„ç•«é¢æœƒå‘ˆç¾é¡›å€’æ‰€ä»¥ scale y è¦æ”¹ç‚º -1ã€‚
- position Y æ˜¯è·ŸåŸå§‹åœ–ç‰‡èª¤å·®ä½ç½®ã€‚

![å‰µå»º ShadowSprite](./Png/ShadowSprite.png)
---

### 5ï¸âƒ£ è¨­å®šè§’è‰²ç‚º Shadow Layer

æ‰€æœ‰éœ€è¦æŠ•å½±çš„è§’è‰²éƒ½éœ€è¦ï¼š

- è¨­å®š `node.layer` ç‚º `UI_SHADOW`

![æ›´æ”¹layer](./Png/ShadowFish.png)

å°±èƒ½æœ‰å½±å­æ•ˆæœäº†

![å½±å­æ•ˆæœ](./Png/ShadowResult.png)
---