'use strict';
Object.defineProperty(exports, "__esModule", { value: true });
exports.onClickExport = exports.ready = exports.update = exports.methods = exports.$ = exports.template = void 0;
exports.template = `
    <ui-prop type="dump" class="prop-pathData" name="pathData"></ui-prop>
    <ui-prop type="dump" class="prop-refresh" name="refresh"></ui-prop>
    <ui-button class="exportButton">點我輸出</ui-button>
`;
exports.$ = {
    pathData: '.prop-pathData',
    refresh: ".prop-refresh",
    exportButton: '.exportButton',
};
exports.methods = {
    onClickExport
};
function update(dump) {
    this.dump = dump;
    this.$.pathData.render(dump.value.pathData);
    this.$.refresh.render(dump.value.refreshPath);
}
exports.update = update;
function ready() {
    this.$.exportButton.addEventListener('confirm', onClickExport.bind(this));
}
exports.ready = ready;
async function onClickExport() {
    if (this.dump.value.pathInfo.value === null && this.dump.value.pathInfo.value.length === 0) {
        console.warn('沒有路徑資料可供輸出');
        return;
    }
    if (this.dump.value.pathData.value === null) {
        console.warn('無法回填JSON');
        return;
    }
    console.log('開始輸出 JSON 資料到 FishRoots 資料夾', this.dump.value.pathInfo.value);
    Editor.Message.send('fish-creator-extension', 'export-json', {
        pathUUID: this.dump.value.pathData.value.uuid,
        data: this.dump.value.pathInfo.value,
    });
}
exports.onClickExport = onClickExport;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcC1leHRlbmQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zb3VyY2UvaW5zcGVjdG9yL2NvbXAtZXh0ZW5kLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQzs7O0FBdUNBLFFBQUEsUUFBUSxHQUFHOzs7O0NBSXZCLENBQUM7QUFFVyxRQUFBLENBQUMsR0FDZDtJQUNJLFFBQVEsRUFBRSxnQkFBZ0I7SUFDMUIsT0FBTyxFQUFFLGVBQWU7SUFDeEIsWUFBWSxFQUFFLGVBQWU7Q0FDaEMsQ0FBQztBQUNXLFFBQUEsT0FBTyxHQUFHO0lBQ25CLGFBQWE7Q0FDaEIsQ0FBQztBQU9GLFNBQWdCLE1BQU0sQ0FBbUIsSUFBUztJQUU5QyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztJQUNqQixJQUFJLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUUsQ0FBQztJQUM5QyxJQUFJLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUUsQ0FBQztBQUNwRCxDQUFDO0FBTEQsd0JBS0M7QUFFRCxTQUFnQixLQUFLO0lBRWpCLElBQUksQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLGdCQUFnQixDQUFFLFNBQVMsRUFBRSxhQUFhLENBQUMsSUFBSSxDQUFFLElBQUksQ0FBRSxDQUFFLENBQUM7QUFDbEYsQ0FBQztBQUhELHNCQUdDO0FBRU0sS0FBSyxVQUFVLGFBQWE7SUFFL0IsSUFBSyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsS0FBSyxLQUFLLElBQUksSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQzNGO1FBQ0ksT0FBTyxDQUFDLElBQUksQ0FBRSxZQUFZLENBQUUsQ0FBQztRQUM3QixPQUFPO0tBQ1Y7SUFFRCxJQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxLQUFLLEtBQUssSUFBSSxFQUM1QztRQUNJLE9BQU8sQ0FBQyxJQUFJLENBQUUsVUFBVSxDQUFFLENBQUM7UUFDM0IsT0FBTztLQUNWO0lBQ0QsT0FBTyxDQUFDLEdBQUcsQ0FBRSw2QkFBNkIsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFFLENBQUM7SUFDN0UsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUUsd0JBQXdCLEVBQUUsYUFBYSxFQUFFO1FBQzFELFFBQVEsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUk7UUFDN0MsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxLQUFxQjtLQUN2RCxDQUFFLENBQUM7QUFDUixDQUFDO0FBbEJELHNDQWtCQyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcclxuXHJcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XHJcblxyXG4vKipcclxuICog6a2a5aC06Lev5b6R57eo6Lyv5pO05YWFXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIOi3r+W+keizh+aWmee1kOani1xyXG4gKi9cclxuaW50ZXJmYWNlIEZpc2hQYXRoRGF0YSBcclxue1xyXG4gICAgLyoqXHJcbiAgICAgKiDkvY3nva5fXHJcbiAgICAgKi9cclxuICAgIFdheXBvaW50czoge1xyXG4gICAgICAgIHBvczoge1xyXG4gICAgICAgICAgICB4OiBudW1iZXI7XHJcbiAgICAgICAgICAgIHk6IG51bWJlcjtcclxuICAgICAgICAgICAgejogbnVtYmVyO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgYmVnaW5TY2FsZT86IG51bWJlcjtcclxuICAgICAgICBlbmRTY2FsZT86IG51bWJlcjtcclxuICAgICAgICBkZWxheVRpbWU/OiBudW1iZXI7XHJcbiAgICAgICAgY3VzdG9tRXZlbnQ/OiBzdHJpbmc7XHJcblxyXG4gICAgfVtdLFxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIOauteaVuFxyXG4gICAgICovXHJcbiAgICBTZWdtZW50Q291bnQ6IG51bWJlcixcclxuXHJcblxyXG59XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IHRlbXBsYXRlID0gYFxyXG4gICAgPHVpLXByb3AgdHlwZT1cImR1bXBcIiBjbGFzcz1cInByb3AtcGF0aERhdGFcIiBuYW1lPVwicGF0aERhdGFcIj48L3VpLXByb3A+XHJcbiAgICA8dWktcHJvcCB0eXBlPVwiZHVtcFwiIGNsYXNzPVwicHJvcC1yZWZyZXNoXCIgbmFtZT1cInJlZnJlc2hcIj48L3VpLXByb3A+XHJcbiAgICA8dWktYnV0dG9uIGNsYXNzPVwiZXhwb3J0QnV0dG9uXCI+6bue5oiR6Ly45Ye6PC91aS1idXR0b24+XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgJCA9XHJcbntcclxuICAgIHBhdGhEYXRhOiAnLnByb3AtcGF0aERhdGEnLFxyXG4gICAgcmVmcmVzaDogXCIucHJvcC1yZWZyZXNoXCIsXHJcbiAgICBleHBvcnRCdXR0b246ICcuZXhwb3J0QnV0dG9uJyxcclxufTtcclxuZXhwb3J0IGNvbnN0IG1ldGhvZHMgPSB7XHJcbiAgICBvbkNsaWNrRXhwb3J0XHJcbn07XHJcbnR5cGUgU2VsZWN0b3I8JD4gPSB7ICQ6IFJlY29yZDxrZXlvZiAkLCBhbnkgfCBudWxsPiB9O1xyXG50eXBlIFBhbmVsVGhpcyA9IFNlbGVjdG9yPHR5cGVvZiAkPiAmXHJcbntcclxuICAgIGR1bXA6IGFueSxcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGUoIHRoaXM6IFBhbmVsVGhpcywgZHVtcDogYW55IClcclxue1xyXG4gICAgdGhpcy5kdW1wID0gZHVtcDtcclxuICAgIHRoaXMuJC5wYXRoRGF0YS5yZW5kZXIoIGR1bXAudmFsdWUucGF0aERhdGEgKTtcclxuICAgIHRoaXMuJC5yZWZyZXNoLnJlbmRlciggZHVtcC52YWx1ZS5yZWZyZXNoUGF0aCApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVhZHkoIHRoaXM6IFBhbmVsVGhpcyApXHJcbntcclxuICAgIHRoaXMuJC5leHBvcnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lciggJ2NvbmZpcm0nLCBvbkNsaWNrRXhwb3J0LmJpbmQoIHRoaXMgKSApO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gb25DbGlja0V4cG9ydCggdGhpczogUGFuZWxUaGlzIClcclxue1xyXG4gICAgaWYgKCB0aGlzLmR1bXAudmFsdWUucGF0aEluZm8udmFsdWUgPT09IG51bGwgJiYgdGhpcy5kdW1wLnZhbHVlLnBhdGhJbmZvLnZhbHVlLmxlbmd0aCA9PT0gMCApXHJcbiAgICB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKCAn5rKS5pyJ6Lev5b6R6LOH5paZ5Y+v5L6b6Ly45Ye6JyApO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIHRoaXMuZHVtcC52YWx1ZS5wYXRoRGF0YS52YWx1ZSA9PT0gbnVsbCApXHJcbiAgICB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKCAn54Sh5rOV5Zue5aGrSlNPTicgKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zb2xlLmxvZyggJ+mWi+Wni+i8uOWHuiBKU09OIOizh+aWmeWIsCBGaXNoUm9vdHMg6LOH5paZ5aS+JywgdGhpcy5kdW1wLnZhbHVlLnBhdGhJbmZvLnZhbHVlICk7XHJcbiAgICBFZGl0b3IuTWVzc2FnZS5zZW5kKCAnZmlzaC1jcmVhdG9yLWV4dGVuc2lvbicsICdleHBvcnQtanNvbicsIHtcclxuICAgICAgICBwYXRoVVVJRDogdGhpcy5kdW1wLnZhbHVlLnBhdGhEYXRhLnZhbHVlLnV1aWQsXHJcbiAgICAgICAgZGF0YTogdGhpcy5kdW1wLnZhbHVlLnBhdGhJbmZvLnZhbHVlIGFzIEZpc2hQYXRoRGF0YSxcclxuICAgIH0gKTtcclxufVxyXG5cclxuIl19